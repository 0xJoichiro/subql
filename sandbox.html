<!DOCTYPE html>
<html lang="English">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>The sandbox | SubQuery Guide</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="SubQuery is a open-source tool to provide a complete process and query data solution to every substrate project and will become core infrastructure for the Polkadot ecosystem.">
    
    <link rel="preload" href="/assets/css/0.styles.164b3159.css" as="style"><link rel="preload" href="/assets/js/app.08ea3601.js" as="script"><link rel="preload" href="/assets/js/3.95d43d8c.js" as="script"><link rel="preload" href="/assets/js/14.ae9b1b60.js" as="script"><link rel="prefetch" href="/assets/js/10.66f81210.js"><link rel="prefetch" href="/assets/js/11.c07c5118.js"><link rel="prefetch" href="/assets/js/12.9c1e3107.js"><link rel="prefetch" href="/assets/js/13.8ede228e.js"><link rel="prefetch" href="/assets/js/15.b721d5fb.js"><link rel="prefetch" href="/assets/js/16.1731b922.js"><link rel="prefetch" href="/assets/js/17.37c35d7b.js"><link rel="prefetch" href="/assets/js/18.440c8779.js"><link rel="prefetch" href="/assets/js/19.96b1f557.js"><link rel="prefetch" href="/assets/js/20.0afbe573.js"><link rel="prefetch" href="/assets/js/21.6eb84099.js"><link rel="prefetch" href="/assets/js/4.eb797805.js"><link rel="prefetch" href="/assets/js/5.ed0e1acc.js"><link rel="prefetch" href="/assets/js/6.c225d5ae.js"><link rel="prefetch" href="/assets/js/7.c4055acf.js"><link rel="prefetch" href="/assets/js/8.9fb913a7.js"><link rel="prefetch" href="/assets/js/9.0d635bc0.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.33b3cf02.js">
    <link rel="stylesheet" href="/assets/css/0.styles.164b3159.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="SubQuery Guide" class="logo"> <span class="site-name can-hide">SubQuery Guide</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.subquery.network/" target="_self" class="nav-link external">
  SubQuery
  <!----></a></div><div class="nav-item"><a href="/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://onfinality.io/" target="_self" class="nav-link external">
  OnFinality
  <!----></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.subquery.network/" target="_self" class="nav-link external">
  SubQuery
  <!----></a></div><div class="nav-item"><a href="/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://onfinality.io/" target="_self" class="nav-link external">
  OnFinality
  <!----></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/quickstart.html" class="sidebar-link">Quick start</a></li><li><a href="/directory_structure.html" class="sidebar-link">Directory Structure</a></li><li><a href="/define_a_subquery.html" class="sidebar-link">Define the SubQuery</a></li><li><a href="/indexing_query.html" class="sidebar-link">Indexing and Query</a></li><li><a href="/sandbox.html" aria-current="page" class="active sidebar-link">The sandbox</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sandbox.html#restriction" class="sidebar-link">Restriction</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="the-sandbox"><a href="#the-sandbox" class="header-anchor">#</a> The sandbox</h1> <p>In our envisioned usage scenario, the SubQuery node is usually run by a trusted host, and the code of the SubQuery project submitted by the user to the node is not entirely trustworthy.</p> <p>Some malicious code is likely to attack the host or even compromise it, and cause damage to the data of other projects in the same host.
Therefore, we use the <a href="https://www.npmjs.com/package/vm2" target="_blank" rel="noopener noreferrer">VM2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> sandbox secured mechanism to reduce risks.</p> <ul><li><p>Runs untrusted code securely in an isolated context, and malicious code will not access network and file system of the host, unless through the exposed interface we injected into the sandbox.</p></li> <li><p>Securely call methods and exchange data and callbacks between sandboxes</p></li> <li><p>Is immune to all known methods of attacks</p></li></ul> <h2 id="restriction"><a href="#restriction" class="header-anchor">#</a> Restriction</h2> <ul><li><p>Limit access to certain built-in modules, only <code>assert</code> and <code>console</code> are whitelisted.</p></li> <li><p>Any 3rd party module are forbid. When defining a SubQuery project, we do not support users to add any new dependencies to <code>package.json</code>, thereby protecting the project's stability and the security in the sandbox.</p></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/18/2021, 3:48:54 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/indexing_query.html" class="prev">
        Indexing and Query
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.08ea3601.js" defer></script><script src="/assets/js/3.95d43d8c.js" defer></script><script src="/assets/js/14.ae9b1b60.js" defer></script>
  </body>
</html>
