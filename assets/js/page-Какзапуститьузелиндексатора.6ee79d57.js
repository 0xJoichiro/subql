(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{725:function(s,e,a){"use strict";a.r(e);var t=a(1),r=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"как-запустить-узел-индексатора"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#как-запустить-узел-индексатора"}},[s._v("#")]),s._v(" Как запустить узел индексатора?")]),s._v(" "),a("h2",{attrs:{id:"видео-гаид"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#видео-гаид"}},[s._v("#")]),s._v(" Видео гайд")]),s._v(" "),a("figure",{staticClass:"video_container"},[a("iframe",{attrs:{src:"https://www.youtube.com/embed/QfNsR12ItnA",frameborder:"0",allowfullscreen:"true"}})]),s._v(" "),a("h2",{attrs:{id:"введение"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#введение"}},[s._v("#")]),s._v(" Введение")]),s._v(" "),a("p",[s._v("Запуск узла индексатора - еще один вариант помимо использования Docker или размещения проекта в "),a("a",{attrs:{href:"https://project.subquery.network/",target:"_blank",rel:"noopener noreferrer"}},[s._v(" SubQuery Projects "),a("OutboundLink")],1),s._v(". Это требует больше времени и усилий, но улучшит ваше понимание того, каким образом работает SubQuery.")]),s._v(" "),a("h2",{attrs:{id:"postgres"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#postgres"}},[s._v("#")]),s._v(" Postgres")]),s._v(" "),a("p",[s._v("Для запуска узла индексатора в вашей инфраструктуре потребуется установка базы данных Postgres. Вы можете установить Postgres "),a("a",{attrs:{href:"https://www.postgresql.org/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v(" здесь "),a("OutboundLink")],1),s._v(" а также убедиться, что версия 12 или выше.")]),s._v(" "),a("h2",{attrs:{id:"установка-subql-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#установка-subql-node"}},[s._v("#")]),s._v(" Установка subql/node")]),s._v(" "),a("p",[s._v("Затем, чтобы запустить узел SubQuery, выполните следующую команду:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g @subql/node\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("The -g flag means to install it globally which means on OSX, the location will be /usr/local/lib/node_modules.")]),s._v(" "),a("p",[s._v("После установки вы можете проверить версию, запустив:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" subql-node --version\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.19")]),s._v(".1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"настроика-конфигов-db"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#настроика-конфигов-db"}},[s._v("#")]),s._v(" Настройка конфигов DB")]),s._v(" "),a("p",[s._v("Затем вам нужно установить следующие переменные среды:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_USER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("postgres\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_PASS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("postgres\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_DATABASE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("postgres\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_HOST")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("localhost\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_PORT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5432")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("Конечно, если у вас разные значения для вышеуказанных ключей, отрегулируйте их соответствующим образом. Обратите внимание, что команда "),a("code",[s._v("env")]),s._v(" отобразит текущие переменные среды и что этот процесс устанавливает эти значения только временно. То есть они действительны только на время работы с терминалом. Чтобы установить их навсегда, сохраните их в своем ~ / bash_profile.")]),s._v(" "),a("h2",{attrs:{id:"индексирование-проекта"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#индексирование-проекта"}},[s._v("#")]),s._v(" Индексирование проекта")]),s._v(" "),a("p",[s._v("Чтобы начать индексирование проекта, перейдите в папку своего проекта и выполните следующую команду:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("subql-node -f "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("Если у вас нет под рукой проекта, "),a("code",[s._v("git clone https://github.com/subquery/subql-helloworld")]),s._v(". Вы должны увидеть, как узел индексатора заработает и начнет индексировать блоки.")]),s._v(" "),a("h2",{attrs:{id:"проверка-postgres"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#проверка-postgres"}},[s._v("#")]),s._v(" Проверка Postgres")]),s._v(" "),a("p",[s._v("Если вы перейдете в Postgres, вы должны увидеть две созданные таблицы. "),a("code",[s._v("public.subqueries")]),s._v(" and "),a("code",[s._v("subquery_1.starter_entities")]),s._v(".")]),s._v(" "),a("p",[a("code",[s._v("public.subqueries")]),s._v(" содержит только 1 строку, которую индексатор проверяет при запуске, чтобы «понять текущее состояние», чтобы понимать, продолжение. Таблица "),a("code",[s._v("starter_entities")]),s._v(" содержит индексы. Чтобы просмотреть данные, запустите "),a("code",[s._v("select (*) из subquery_1.starter_entities")]),s._v(".")])])}),[],!1,null,null,null);e.default=r.exports}}]);