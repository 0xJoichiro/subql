(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{886:function(e,s,t){"use strict";t.r(s);var a=t(1),r=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"如何运行索引器节点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何运行索引器节点"}},[e._v("#")]),e._v(" 如何运行索引器节点?")]),e._v(" "),t("h2",{attrs:{id:"视频教程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#视频教程"}},[e._v("#")]),e._v(" 视频教程")]),e._v(" "),t("figure",{staticClass:"video_container"},[t("iframe",{attrs:{src:"https://www.youtube.com/embed/QfNsR12ItnA",frameborder:"0",allowfullscreen:"true"}})]),e._v(" "),t("h2",{attrs:{id:"简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[e._v("#")]),e._v(" 简介")]),e._v(" "),t("p",[e._v("运行索引器节点是在使用 Docker或在 "),t("a",{attrs:{href:"https://project.subquery.network/",target:"_blank",rel:"noopener noreferrer"}},[e._v("SubQuery 项目"),t("OutboundLink")],1),e._v(" 上为您托管项目之外的另一个选项。 It requires more time and effort but will enhance your understanding of how SubQuery works under the covers.")]),e._v(" "),t("h2",{attrs:{id:"postgres"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#postgres"}},[e._v("#")]),e._v(" Postgres")]),e._v(" "),t("p",[e._v("Running an indexer node on your infrastructure will require the setup of a Postgres database. You can install Postgres from "),t("a",{attrs:{href:"https://www.postgresql.org/download/",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),t("OutboundLink")],1),e._v(" and ensure the version is 12 or greater.")]),e._v(" "),t("h2",{attrs:{id:"install-subql-node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-subql-node"}},[e._v("#")]),e._v(" Install subql/node")]),e._v(" "),t("p",[e._v("Then to run a SubQuery node, run the following command:")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" -g @subql/node\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("The -g flag means to install it globally which means on OSX, the location will be /usr/local/lib/node_modules.")]),e._v(" "),t("p",[e._v("Once installed, you can check the version by running:")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" subql-node --version\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.19")]),e._v(".1\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("h2",{attrs:{id:"setting-db-configs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setting-db-configs"}},[e._v("#")]),e._v(" Setting DB configs")]),e._v(" "),t("p",[e._v("Next, you need to set the following environmental variables:")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("DB_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("postgres\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("DB_PASS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("postgres\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("DB_DATABASE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("postgres\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("DB_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("localhost\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("DB_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("5432")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("p",[e._v("Of course, if you have different values for the above keys, please adjust accordingly. Note that the "),t("code",[e._v("env")]),e._v(" command will display the current environment variables and that this process only sets these values temporarily. That is, they are only valid for the duration of the terminal session. To set them permanently, store them in your ~/bash_profile instead.")]),e._v(" "),t("h2",{attrs:{id:"indexing-a-project"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#indexing-a-project"}},[e._v("#")]),e._v(" Indexing a project")]),e._v(" "),t("p",[e._v("To start indexing a project, navigate into your project folder and run the following command:")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("subql-node -f "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("If you do not have a project handy, "),t("code",[e._v("git clone https://github.com/subquery/subql-helloworld")]),e._v(". You should see the indexer node kick into life and start indexing blocks.")]),e._v(" "),t("h2",{attrs:{id:"inspecting-postgres"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#inspecting-postgres"}},[e._v("#")]),e._v(" Inspecting Postgres")]),e._v(" "),t("p",[e._v("If you navigate to Postgres, you should see two tables created. "),t("code",[e._v("public.subqueries")]),e._v(" and "),t("code",[e._v("subquery_1.starter_entities")]),e._v(".")]),e._v(" "),t("p",[t("code",[e._v("public.subqueries")]),e._v(" only contains 1 row which the indexer checks upon start up to “understand the current state” so it knows where to continue from. The "),t("code",[e._v("starter_entities")]),e._v(" table contains the indexes. To view the data, run "),t("code",[e._v("select (*) from subquery_1.starter_entities")]),e._v(".")])])}),[],!1,null,null,null);s.default=r.exports}}]);