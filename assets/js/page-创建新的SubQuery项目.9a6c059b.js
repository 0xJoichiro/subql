(window.webpackJsonp=window.webpackJsonp||[]).push([[223],{966:function(s,t,a){"use strict";a.r(t);var e=a(1),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"创建新的-subquery-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建新的-subquery-项目"}},[s._v("#")]),s._v(" 创建新的 SubQuery 项目")]),s._v(" "),a("p",[s._v("在 "),a("RouterLink",{attrs:{to:"/quickstart/quickstart.html"}},[s._v("快速开始")]),s._v(" 指南， 我们快速地演示了一个DEMO，让您知道什么是SubQuery以及它是如何运作的。 在这里，我们将进一步了解创建项目流程及后续所需使用的关键文件的流程。")],1),s._v(" "),a("h2",{attrs:{id:"subquery-示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#subquery-示例"}},[s._v("#")]),s._v(" SubQuery 示例")]),s._v(" "),a("p",[s._v("以下一些示例将假定您在 "),a("RouterLink",{attrs:{to:"/zh/quickstart/quickstart.html"}},[s._v("快速启动")]),s._v(" 部分中成功初始化了启动器包。 从这个启动程序包，我们会走过标准进程来定制和执行您的 SubQuery 项目。")],1),s._v(" "),a("ol",[a("li",[s._v("您可以使用 "),a("code",[s._v("subql init --specversion 0.2.0 PROJECT_NAME")]),s._v(" 初始化您的项目。 也可以使用旧的 spec 版本 "),a("code",[s._v("subql init PROJECT_NAME")])]),s._v(" "),a("li",[s._v("更新清单文件("),a("code",[s._v("个项目。 aml")]),s._v(") 以包含关于您的 blockchain 以及您将要映射的实体的信息 - 查看 "),a("RouterLink",{attrs:{to:"/zh/create/manifest.html"}},[s._v("清单文件")])],1),s._v(" "),a("li",[s._v("在您的架构中创建 GraphQL 实体("),a("code",[s._v("架构)。 定义您要提取和持续查询的数据形状的 rapphql")]),s._v("- 参见 "),a("RouterLink",{attrs:{to:"/zh/create/graphql.html"}},[s._v("GraphQL Schema")])],1),s._v(" "),a("li",[s._v("添加所有映射函数 (eg "),a("code",[s._v("映射处理器。 s")]),s._v(") 您想要调用来将链式数据转换为您已定义的 GraphQL 实体 - 查看 "),a("RouterLink",{attrs:{to:"/zh/create/mapping.html"}},[s._v("映射")])],1),s._v(" "),a("li",[s._v("生成，构建， 并发布代码到 SubQuery 项目 (或在您自己的本地节点中运行) - 在我们的快速启动指南中查看 "),a("RouterLink",{attrs:{to:"/zh/create/quickstart.html#running-and-querying-your-starter-project"}},[s._v("运行并查询您的启动项目")]),s._v("。")],1)]),s._v(" "),a("h2",{attrs:{id:"目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[s._v("#")]),s._v(" 目录结构")]),s._v(" "),a("p",[s._v("下面的map提供了运行 "),a("code",[s._v("init")]),s._v(" 命令时子查询项目的目录结构概览。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("- project-name\n  L package.json\n  L project.yaml\n  L README.md\n  L schema.graphql\n  L tsconfig.json\n  L docker-compose.yml\n  L src\n    L index.ts\n    L mappings\n      L mappingHandlers.ts\n  L .gitignore\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("示例")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/subQuery_directory_stucture.png",alt:"SubQuery directory structure"}})]),s._v(" "),a("h2",{attrs:{id:"代码生成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码生成"}},[s._v("#")]),s._v(" 代码生成")]),s._v(" "),a("p",[s._v("每当您更改您的 GraphQL 实体时，您必须通过以下命令重新生成您的类型目录。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yarn 编码器\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这将创建一个新的目录(或更新现有的目录) "),a("code",[s._v("src/type")]),s._v(" 其中包含您之前在 "),a("code",[s._v("scheme 中定义的每个类型生成的实体类别。 rapphql")]),s._v(" 这些类别提供了安全类型实体加载， 读取并写入实体字段 - 在 "),a("RouterLink",{attrs:{to:"/zh/create/graphql.html"}},[s._v("GraphQL Schema")]),s._v(" 中查看更多关于此进程的信息。")],1),s._v(" "),a("h2",{attrs:{id:"创建项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建项目"}},[s._v("#")]),s._v(" 创建项目")]),s._v(" "),a("p",[s._v("为了在本地托管的 SubQuery 节点上运行您的SubQuery 项目，您需要首先构建您的项目。")]),s._v(" "),a("p",[s._v("从项目的根目录运行构建命令。")]),s._v(" "),a("CodeGroup",[s._v(" `console.log` 方法**不再受支持**。 相反， `Logger` 模块已被注入到类型中，这意味着我们可以支持一个可以接受不同日志级别的logger。\n"),a("div",{staticClass:"language-typescript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[s._v("logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Info level message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("debug")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Debugger level message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("warn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Warning level message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("要使用 "),a("code",[s._v("logger.info")]),s._v(" 或 "),a("code",[s._v("logger.warn")]),s._v("，只需将行放入您的映射文件。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/logging_info.png",alt:"logging.info"}})]),s._v(" "),a("p",[s._v("要使用 "),a("code",[s._v("logger.debug")]),s._v(", 需要一个额外的步骤。 将 "),a("code",[s._v("--log-level=debug")]),s._v(" 添加到您的命令行。")]),s._v(" "),a("p",[s._v("如果您正在运行一个docker容器，请将此行添加到您的 "),a("code",[s._v("docker-compose.yaml")]),s._v(" 文件中。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/logging_debug.png",alt:"logging.debug"}})]),s._v(" "),a("p",[s._v("现在您应该可以在终端屏幕上看到新的日志记录。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/subquery_logging.png",alt:"logging.debug"}})])])],1)}),[],!1,null,null,null);t.default=r.exports}}]);