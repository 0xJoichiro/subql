(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{997:function(s,e,a){"use strict";a.r(e);var t=a(1),r=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"如何运行索引器节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何运行索引器节点"}},[s._v("#")]),s._v(" 如何运行索引器节点?")]),s._v(" "),a("h2",{attrs:{id:"视频教程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视频教程"}},[s._v("#")]),s._v(" 视频教程")]),s._v(" "),a("figure",{staticClass:"video_container"},[a("iframe",{attrs:{src:"https://www.youtube.com/embed/QfNsR12ItnA",frameborder:"0",allowfullscreen:"true"}})]),s._v(" "),a("h2",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),a("p",[s._v("运行索引器节点是在使用 Docker或在 "),a("a",{attrs:{href:"https://project.subquery.network/",target:"_blank",rel:"noopener noreferrer"}},[s._v("SubQuery 项目"),a("OutboundLink")],1),s._v(" 上为您托管项目之外的另一个选项。 它需要花费更多的时间和精力，但是它将增强您对SubQuery工作原理的了。")]),s._v(" "),a("h2",{attrs:{id:"数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库"}},[s._v("#")]),s._v(" 数据库")]),s._v(" "),a("p",[s._v("在您的基础设施上运行索引器节点需要设置Postgres数据库。 您可以从 "),a("a",{attrs:{href:"https://www.postgresql.org/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里安装"),a("OutboundLink")],1),s._v(" Postgres，并确保版本为12或更高。")]),s._v(" "),a("h2",{attrs:{id:"安装子ql-节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装子ql-节点"}},[s._v("#")]),s._v(" 安装子ql/节点")]),s._v(" "),a("p",[s._v("运行一个 SubQuery 节点，需要运行以下命令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" install-g @subql/node\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("-g 表明全局安装，这意味着在 OSX 上的位置： /usr/local/lib/node_modules.")]),s._v(" "),a("p",[s._v("一旦安装完毕，您可以通过以下命令来检查版本：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" subql-node --version\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.19")]),s._v(".1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"数据库配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库配置"}},[s._v("#")]),s._v(" 数据库配置")]),s._v(" "),a("p",[s._v("接下来，你需要设置以下环境变量：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_USER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("postgres\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_PASS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("postgres\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_DATABASE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("postgres\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_HOST")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("localhost\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_PORT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5432")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("当然，如果您想修改上述键值，请相应调整。 请注意， "),a("code",[s._v("env")]),s._v(" 命令将显示当前的环境变量，这个进程只是临时设置这些值。 这就是说，它们只适用于终端会话。 若要永久设置它们，请将它们存储在您的 ~/bash_profile中。")]),s._v(" "),a("h2",{attrs:{id:"为项目编制索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为项目编制索引"}},[s._v("#")]),s._v(" 为项目编制索引")]),s._v(" "),a("p",[s._v("要开始对一个项目进行索引，请进入您的项目文件夹并运行以下命令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("subql-node -f "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果你还没有项目，请使用 "),a("code",[s._v("git clone https://github.com/subquery/subql-helloworld")]),s._v("。 您应该看到indexer节点开始运行并开始索引块。")]),s._v(" "),a("h2",{attrs:{id:"检查postgres"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检查postgres"}},[s._v("#")]),s._v(" 检查Postgres")]),s._v(" "),a("p",[s._v("如果您导航到 Postgres，您应该看到两个表已创建。 "),a("code",[s._v("public.subquestions")]),s._v(" 和"),a("code",[s._v("subquery_1.starter_entities")]),s._v(".")]),s._v(" "),a("p",[a("code",[s._v("public.subqueries")]),s._v(" 仅包含1行，索引器在启动时检查该行以“了解当前状态”，以便知道从哪里继续。 "),a("code",[s._v("starter_entities")]),s._v(" 表格包含索引。 要查看数据，运行 "),a("code",[s._v("select (*) from subquery_1.starter_entities.")]),s._v(" 。")])])}),[],!1,null,null,null);e.default=r.exports}}]);