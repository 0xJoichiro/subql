(window.webpackJsonp=window.webpackJsonp||[]).push([[198],{765:function(s,e,a){"use strict";a.r(e);var t=a(1),r=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"วิธีการรัน-indexer-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#วิธีการรัน-indexer-node"}},[s._v("#")]),s._v(" วิธีการรัน indexer node")]),s._v(" "),a("h2",{attrs:{id:"คู่มือวิดีโอ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#คู่มือวิดีโอ"}},[s._v("#")]),s._v(" คู่มือวิดีโอ")]),s._v(" "),a("figure",{staticClass:"video_container"},[a("iframe",{attrs:{src:"https://www.youtube.com/embed/QfNsR12ItnA",frameborder:"0",allowfullscreen:"true"}})]),s._v(" "),a("h2",{attrs:{id:"บทนํา"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#บทนํา"}},[s._v("#")]),s._v(" บทนำ")]),s._v(" "),a("p",[s._v("การรัน indexer node เป็นอีกตัวเลือกหนึ่งนอกเหนือจากการใช้ Docker หรือการโฮสต์โปรเจ็กต์ของคุณที่ "),a("a",{attrs:{href:"https://project.subquery.network/",target:"_blank",rel:"noopener noreferrer"}},[s._v("SubQuery Projects "),a("OutboundLink")],1),s._v(" ซึ่งต้องใช้เวลาและความพยายามมากขึ้น แต่จะช่วยเพิ่มความเข้าใจเกี่ยวกับวิธีการทำงานของ SubQuery เบื้องหลังให้กับคุณมากยิ่งขึ้น")]),s._v(" "),a("h2",{attrs:{id:"postgres"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#postgres"}},[s._v("#")]),s._v(" Postgres")]),s._v(" "),a("p",[s._v("การรัน indexer node บนโครงสร้างพื้นฐานของคุณจะต้องมีการตั้งค่าฐานข้อมูล Postgres คุณสามารถติดตั้ง Postgres ได้"),a("a",{attrs:{href:"https://www.postgresql.org/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("ที่นี่"),a("OutboundLink")],1),s._v(" และตรวจดูให้แน่ใจว่าเป็นเวอร์ชัน 12 ขึ้นไป")]),s._v(" "),a("h2",{attrs:{id:"ติดตั้ง-subql-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ติดตั้ง-subql-node"}},[s._v("#")]),s._v(" ติดตั้ง subql/node")]),s._v(" "),a("p",[s._v("จากนั้นให้ใช้คำสั่งต่อไปนี้เพื่อรันโหนด SubQuery:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g @subql/node\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("flag -g หมายถึงการติดตั้งแบบ global ซึ่งหมายถึงตำแหน่งจะเป็น /usr/local/lib/node_modules บน OSX")]),s._v(" "),a("p",[s._v("เมื่อติดตั้งแล้ว คุณสามารถตรวจสอบเวอร์ชันได้โดยการรัน:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" subql-node --version\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.19")]),s._v(".1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"การตั้งค่า-db"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#การตั้งค่า-db"}},[s._v("#")]),s._v(" การตั้งค่า DB")]),s._v(" "),a("p",[s._v("จากนั้น คุณต้องตั้งค่า environmental variables ต่อไปนี้:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_USER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("postgres\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_PASS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("postgres\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_DATABASE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("postgres\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_HOST")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("localhost\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_PORT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5432")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("แน่นอนว่าหากคุณมีค่าที่ต่างออกไปสำหรับตัวแปรด้านบน โปรดปรับตามนั้น โปรดทราบว่าคำสั่ง "),a("code",[s._v("env")]),s._v(" จะแสดง environment variables ปัจจุบัน และกระบวนการนี้จะทำตั้งค่าเหล่านี้เพียงชั่วคราวเท่านั้น นั่นคือใช้ได้เฉพาะในช่วงเวลาที่ใช้งานเทอร์มินัล หากต้องการตั้งค่าอย่างถาวร ให้เก็บค่าไว้ใน ~/bash_profile ของคุณแทน")]),s._v(" "),a("h2",{attrs:{id:"การ-index-โปรเจ็กต์"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#การ-index-โปรเจ็กต์"}},[s._v("#")]),s._v(" การ Index โปรเจ็กต์")]),s._v(" "),a("p",[s._v("ในการเริ่มทำการ index โปรเจ็กต์ ให้ไปที่โฟลเดอร์โปรเจ็กต์ของคุณและรันคำสั่งต่อไปนี้:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("subql-node -f "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("หากคุณไม่มีโปรเจ็กต์ในการทำ, "),a("code",[s._v("git clone https://github.com/subquery/subql-helloworld")]),s._v(" คุณจะเห็น indexer node เริ่มทำงานและเริ่มการ index บล็อก")]),s._v(" "),a("h2",{attrs:{id:"การตรวจสอบ-postgres"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#การตรวจสอบ-postgres"}},[s._v("#")]),s._v(" การตรวจสอบ Postgres")]),s._v(" "),a("p",[s._v("หากคุณไปที่ Postgres คุณจะเห็นตารางที่สร้างขึ้นสองตาราง "),a("code",[s._v("public.subqueries")]),s._v(" และ "),a("code",[s._v("subquery_1.starter_entities")])]),s._v(" "),a("p",[a("code",[s._v("public.subqueries")]),s._v(' มี 1 แถวเท่านั้นที่ indexer จะตรวจสอบเมื่อเริ่มต้นใช้งานในการ "เข้าใจในสถานะปัจจุบัน" เพื่อให้รู้ว่าจะดำเนินการต่อจากที่ใด ตาราง '),a("code",[s._v("starter_entities")]),s._v(" เก็บการ index ต่างๆไว้ หากต้องการดูข้อมูล ให้เรียกใช้ "),a("code",[s._v("select (*) from subquery_1.starter_entities")])])])}),[],!1,null,null,null);e.default=r.exports}}]);