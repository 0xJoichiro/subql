(window.webpackJsonp=window.webpackJsonp||[]).push([[196],{878:function(s,e,a){"use strict";a.r(e);var t=a(1),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"在本地运行-subquery"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在本地运行-subquery"}},[s._v("#")]),s._v(" 在本地运行 SubQuery")]),s._v(" "),a("p",[s._v("本指南将介绍如何在基础设施上运行本地SubQuery节点，其中包括索引器和查询服务的使用。 不用担心在运行自己的SubQuery基础架构中所出现的问题。 SubQuery 向社区免费提供 "),a("a",{attrs:{href:"https://explorer.subquery.network",target:"_blank",rel:"noopener noreferrer"}},[s._v("管理的托管服务"),a("OutboundLink")],1),s._v("。 "),a("RouterLink",{attrs:{to:"/zh/publish/publish.html"}},[s._v("按照我们所发布的指南")]),s._v(" 查看您如何将项目部署到 "),a("a",{attrs:{href:"https://project.subquery.network",target:"_blank",rel:"noopener noreferrer"}},[s._v("SubQuery 项目"),a("OutboundLink")],1),s._v("。")],1),s._v(" "),a("h2",{attrs:{id:"使用-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-docker"}},[s._v("#")]),s._v(" 使用 Docker")]),s._v(" "),a("p",[s._v("An alternative solution is to run a "),a("strong",[s._v("Docker Container")]),s._v(", defined by the "),a("code",[s._v("docker-compose.yml")]),s._v(" file. For a new project that has been just initialised you won't need to change anything here. 对于刚刚初始化的新项目，您将不需要在此更改任何内容。")]),s._v(" "),a("p",[s._v("在项目目录下运行以下命令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("docker-compose pull "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" docker-compose up\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("第一次下载所需软件包可能需要一些时间("),a("a",{attrs:{href:"https://www.npmjs.com/package/@subql/node",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("@subql/node")]),a("OutboundLink")],1),s._v(", "),a("a",{attrs:{href:"https://www.npmjs.com/package/@subql/query",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("@subql/quiry")]),a("OutboundLink")],1),s._v(", and Postgress) ，但很快你就会看到一个运行中的 SubQuery 节点。")]),s._v(" "),a("h2",{attrs:{id:"运行indexer-subql-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行indexer-subql-node"}},[s._v("#")]),s._v(" 运行Indexer (subql/node)")]),s._v(" "),a("p",[s._v("需求：")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.postgresql.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Postgres"),a("OutboundLink")],1),s._v(" 数据库 (版本12或更高). "),a("a",{attrs:{href:"https://www.postgresql.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Postgres"),a("OutboundLink")],1),s._v(" database (version 12 or higher). While the "),a("a",{attrs:{href:"#start-a-local-subquery-node"}},[s._v("SubQuery node")]),s._v(" is indexing the blockchain, the extracted data is stored in an external database instance.")])]),s._v(" "),a("p",[s._v("SubQuery 节点需要一个加载的过程，它能够从 SubQuery 项目中提取基于子区块链的数据，并将其保存到 Postgres 数据库。")]),s._v(" "),a("h3",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# NPM")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g @subql/node\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("请注意我们不推荐使用 "),a("code",[s._v("yarn global")]),s._v(" ，因为它的依赖管理性能不佳，可能导致在运行中出现错误。")]),s._v(" "),a("p",[s._v("安装完毕后，您可以使用以下命令来启动节点：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("subql-node "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("command"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"输入命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输入命令"}},[s._v("#")]),s._v(" 输入命令")]),s._v(" "),a("p",[s._v("The following commands will assist you to complete the configuration of a SubQuery node and begin indexing. To find out more, you can always run "),a("code",[s._v("--help")]),s._v(". 要了解更多信息，您可以运行 "),a("code",[s._v("--help")]),s._v("。")]),s._v(" "),a("h4",{attrs:{id:"指向本地项目路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指向本地项目路径"}},[s._v("#")]),s._v(" 指向本地项目路径")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("subql-node -f your-project-path\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"using-a-dictionary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-a-dictionary"}},[s._v("#")]),s._v(" Using a Dictionary")]),s._v(" "),a("p",[s._v("Using a full chain dictionary can dramatically speed up the processing of a SubQuery project during testing or during your first index. In some cases, we've seen indexing performance increases of up to 10x. 在特定情况下，我们可以看到索引性能提高了10倍。")]),s._v(" "),a("p",[s._v("完整的链词库预先索引特定链中所有事件和外观的位置，并允许您的节点服务在索引时跳到相关位置，而不是检查每个区块。")]),s._v(" "),a("p",[s._v("您可以在"),a("code",[s._v("project.yaml")]),s._v("文件中添加字典端点（请参见"),a("RouterLink",{attrs:{to:"/zh/create/manifest.html"}},[s._v("Manifest File")]),s._v("），或在运行时使用以下命令指定它：")],1),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("subql-node --network-dictionary=https://api.subquery.network/sq/subquery/dictionary-polkadot\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("RouterLink",{attrs:{to:"/zh/tutorials_examples/dictionary.html"}},[s._v("阅读更多关于 SubQuery 词典的工作原理")])],1),s._v(" "),a("h4",{attrs:{id:"连接数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接数据库"}},[s._v("#")]),s._v(" 连接数据库")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("export DB_USER=postgres\nexport DB_PASS=postgres\nexport DB_DATABASE=postgres\nexport DB_HOST=localhost\nexport DB_PORT=5432\nsubql-node -f your-project-path \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("Depending on the configuration of your Postgres database (e.g. a different database password), please ensure also that both the indexer ("),a("code",[s._v("subql/node")]),s._v(") and the query service ("),a("code",[s._v("subql/query")]),s._v(") can establish a connection to it.")]),s._v(" "),a("h4",{attrs:{id:"specify-a-configuration-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#specify-a-configuration-file"}},[s._v("#")]),s._v(" Specify a configuration file")]),s._v(" "),a("h4",{attrs:{id:"specify-a-configuration-file-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#specify-a-configuration-file-2"}},[s._v("#")]),s._v(" Specify a configuration file")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("subql-node -c your-project-config.yml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("This will point the query node to a configuration file which can be in YAML or JSON format. Check out the example below.")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subquery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ../../../../subql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("example/extrinsics\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subqueryName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" extrinsics\nbatchSize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nlocalMode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("true 看看下面的例子。\n\n```yaml\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subquery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ../../../../subql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("example/extrinsics\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subqueryName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" extrinsics\nbatchSize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nlocalMode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h4",{attrs:{id:"如何更改区块链批处理大小"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何更改区块链批处理大小"}},[s._v("#")]),s._v(" 如何更改区块链批处理大小")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("subql-node -f your-project-path --batch-size 200\n\nResult:\n[IndexerManager] fetch block [203, 402]\n[IndexerManager] fetch block [403, 602]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("When the indexer first indexes the chain, fetching single blocks will significantly decrease the performance. Increasing the batch size to adjust the number of blocks fetched will decrease the overall processing time. The current default batch size is 100. 增加批量处理的规模以调整获取的区块数量，这将会减少整个处理时间。 默认的批处理大小为100。")]),s._v(" "),a("h4",{attrs:{id:"local-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#local-mode"}},[s._v("#")]),s._v(" Local mode")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("subql-node -f your-project-path --local\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("当需要进行调试时，用户可以在本地模式下运行节点。 For debugging purposes, users can run the node in local mode. Switching to local model will create Postgres tables in the default schema "),a("code",[s._v("public")]),s._v(".")]),s._v(" "),a("p",[s._v("如果未使用本地模式，则使用初始的Postgres 模式，并将创建初始的 "),a("code",[s._v("subquery_")]),s._v(" 和与其相对应的项目表。")]),s._v(" "),a("h4",{attrs:{id:"检查节点运行状况。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检查节点运行状况。"}},[s._v("#")]),s._v(" 检查节点运行状况。")]),s._v(" "),a("p",[s._v("有两个端口可用来检查和监视所运行的 SubQuery 节点的健康状况。")]),s._v(" "),a("ul",[a("li",[s._v("返回普通 200 响应的健康检查端口")]),s._v(" "),a("li",[s._v("Metadata端口，其中包括您正在运行的 SubQuery 节点的额外分析")])]),s._v(" "),a("p",[s._v("将其附加到您的 SubQuery 节点的基本URL。 例如："),a("code",[s._v("http://localhost:3000/meta")]),s._v(" 将会返回")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"currentProcessingHeight"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000699")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"currentProcessingTimestamp"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1631517883547")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targetHeight"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6807295")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bestHeight"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6807298")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"indexerNodeVersion"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.19.1"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lastProcessedHeight"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000699")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lastProcessedTimestamp"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1631517883555")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"uptime"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41.151789063")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"polkadotSdkVersion"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5.4.1"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"apiConnected"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"injectedApiConnected"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"usingDictionary"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"chain"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Polkadot"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"specName"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"polkadot"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"genesisHash"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0x91b171bb158e2d3848fa23a9f1c25182fb8e20313b2c1eb49219da7a70ce90c3"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"blockTime"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("After running the subql-query service successfully, open your browser and head to "),a("code",[s._v("http://localhost:3000")]),s._v(". You should see a GraphQL playground showing in the Explorer and the schema that is ready to query.")]),s._v(" "),a("p",[s._v("如果索引器出现错误，将返回500错误。 这通常可以在节点启动时看到。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"status"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Indexer is not healthy"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("如果使用了错误的URL，将返回404 not found错误。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"statusCode"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),s._v(",\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"message"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cannot GET /healthy"')]),s._v(",\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Not Found"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h4",{attrs:{id:"调试您的项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调试您的项目"}},[s._v("#")]),s._v(" 调试您的项目")]),s._v(" "),a("p",[s._v("使用 "),a("a",{attrs:{href:"https://nodejs.org/en/docs/guides/debugging-getting-started/",target:"_blank",rel:"noopener noreferrer"}},[s._v("node inspector"),a("OutboundLink")],1),s._v(" 来运行以下命令。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("This guide works through how to run a "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" SubQuery node on your infrastructure, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" includes both the indexer and query service. Don't want to worry about running your own SubQuery infrastructure? SubQuery provides a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://explorer.subquery.network"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("managed hosted service"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" to the community "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" free. "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"../publish/publish.md"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Follow our publishing guide"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" to see how you can upload your project to "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://project.subquery.network"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("SubQuery Projects"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("例如：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("node --inspect-brk /usr/local/bin/subql-node -f ~/Code/subQuery/projects/subql-helloworld/\nDebugger listening on ws://127.0.0.1:9229/56156753-c07d-4bbe-af2d-2c7ff4bcc5ad\nFor help, see: https://nodejs.org/en/docs/inspector\nDebugger attached.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("然后打开Chrome开发工具，进入Source>Filesystem，将项目添加到工作区并开始调试。 查看更多信息"),a("a",{attrs:{href:"https://doc.subquery.network/tutorials_examples/debug-projects/",target:"_blank",rel:"noopener noreferrer"}},[s._v("如何调试SubQuery项目"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"运行query服务-subql-query"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行query服务-subql-query"}},[s._v("#")]),s._v(" 运行Query服务(subql/query)")]),s._v(" "),a("h3",{attrs:{id:"安装-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# NPM")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g @subql/query\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("请注意我们不推荐使用 "),a("code",[s._v("yarn global")]),s._v(" ，因为它的依赖管理性能不佳，可能导致在运行中出现错误。")]),s._v(" "),a("h3",{attrs:{id:"运行query服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行query服务"}},[s._v("#")]),s._v(" 运行Query服务")]),s._v(" "),a("p",[s._v("``` export DB_HOST=localhost subql-query --name <project_name> --playground ````")]),s._v(" "),a("p",[s._v("Make sure the project name is the same as the project name when you "),a("RouterLink",{attrs:{to:"/zh/quickstart/quickstart.html#initialise-the-starter-subquery-project"}},[s._v("initialize the project")]),s._v(". Also, check the environment variables are correct. 此外，请检查环境变量是否配置正确。")],1),s._v(" "),a("p",[s._v("成功运行subql查询服务后，打开浏览器并转到"),a("code",[s._v("http://localhost:3000")]),s._v(". 您将会看到 GraphQL playground 会已准备查询的模式显示在资源管理器中。")])])}),[],!1,null,null,null);e.default=n.exports}}]);