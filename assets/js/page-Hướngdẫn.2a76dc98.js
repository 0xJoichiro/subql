(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{955:function(n,a,t){"use strict";t.r(a);var s=t(1),i=Object(s.a)({},(function(){var n=this,a=n.$createElement,t=n._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"huong-dan"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#huong-dan"}},[n._v("#")]),n._v(" Hướng dẫn")]),n._v(" "),t("h2",{attrs:{id:"lam-sao-đe-bat-đau-tai-mot-block-khac-voi-mac-đinh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lam-sao-đe-bat-đau-tai-mot-block-khac-voi-mac-đinh"}},[n._v("#")]),n._v(" Làm sao để bắt đầu tại một block khác với mặc định?")]),n._v(" "),t("h3",{attrs:{id:"video-huong-dan"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#video-huong-dan"}},[n._v("#")]),n._v(" Video hướng dẫn")]),n._v(" "),t("figure",{staticClass:"video_container"},[t("iframe",{attrs:{src:"https://www.youtube.com/embed/ZiNSXDMHmBk",frameborder:"0",allowfullscreen:"true"}})]),n._v(" "),t("h3",{attrs:{id:"gioi-thieu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gioi-thieu"}},[n._v("#")]),n._v(" Giới thiệu")]),n._v(" "),t("p",[n._v("Theo mặc định, tất cả các dự án khởi động bắt đầu đồng bộ hóa blockchain từ khối nguyên thủy (Genesis Block). Nói cách khác, từ block số 1. Đối với các blockchain lớn, quá trình đồng bộ hóa này thường mất vài ngày, thậm chí là vài tuần để hoàn thành.")]),n._v(" "),t("p",[n._v("Để bắt đầu đồng bộ hóa node (nút) SubQuery từ một nấc độ cao block khác 0, bạn cần phải sửa đổi tệp project.yaml của mình và thay đổi key về block khởi đầu (startBlock).")]),n._v(" "),t("p",[n._v("Trong tệp project.yaml dưới đây, block khởi đầu đã được đặt thành 1.000.000")]),n._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[n._v("specVersion: "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("0.0")]),n._v(".1\ndescription: "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('""')]),n._v("\nrepository: "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('""')]),n._v("\nschema: ./schema.graphql\nnetwork:\n  endpoint: wss://polkadot.api.onfinality.io/public-ws\n  dictionary: https://api.subquery.network/sq/subquery/dictionary-polkadot\ndataSources:\n  - name: main\n    kind: substrate/Runtime\n    startBlock: "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("1000000")]),n._v("\n    mapping:\n      handlers:\n        - handler: handleBlock\n          kind: substrate/BlockHandler\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br")])]),t("h3",{attrs:{id:"tai-sao-lai-khong-bat-đau-tu-block-0"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tai-sao-lai-khong-bat-đau-tu-block-0"}},[n._v("#")]),n._v(" Tại sao lại không bắt đầu từ block 0?")]),n._v(" "),t("p",[n._v("Nguyên nhân chủ yếu là vì làm vậy sẽ giúp giảm thời gian đồng bộ hóa blockchain. Điều này nghĩa là nếu chỉ quan tâm đến các giao dịch trong 3 tháng gần nhất, bạn có thể chỉ đồng bộ hóa những block trong 3 tháng gần nhất - như vậy thời gian đồng bộ sẽ ngắn hơn và bạn có thể nhanh chóng bắt tay vào công đoạn phát triển dự án.")]),n._v(" "),t("h3",{attrs:{id:"han-che-cua-viec-nay-la-gi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#han-che-cua-viec-nay-la-gi"}},[n._v("#")]),n._v(" Hạn chế của việc này là gì?")]),n._v(" "),t("p",[n._v("Hạn chế rõ ràng nhất sẽ là bạn sẽ không thể truy vấn dữ liệu trên blockchain đối với các block mà bạn không có.")]),n._v(" "),t("h3",{attrs:{id:"lam-sao-đe-biet-blockchain-hien-đang-co-nac-đo-cao-la-bao-nhieu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lam-sao-đe-biet-blockchain-hien-đang-co-nac-đo-cao-la-bao-nhieu"}},[n._v("#")]),n._v(" Làm sao để biết blockchain hiện đang có nấc độ cao là bao nhiêu?")]),n._v(" "),t("p",[n._v("Nếu đang sử dụng mạng Polkadot, bạn có thể truy cập vào trang "),t("a",{attrs:{href:"https://polkascan.io/",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://polkascan.io/"),t("OutboundLink")],1),n._v(', chọn mạng, sau đó xem tại mục "Block đã hoàn thiện".')]),n._v(" "),t("h3",{attrs:{id:"toi-co-can-xay-dung-hoac-tao-lai-code-khong"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#toi-co-can-xay-dung-hoac-tao-lai-code-khong"}},[n._v("#")]),n._v(" Tôi có cần xây dựng hoặc tạo lại code không?")]),n._v(" "),t("p",[n._v("Không. Bởi vì bạn đang sửa đổi tệp project.yaml (về cơ bản thì đây là tệp cấu hình), vậy nên bạn sẽ không phải xây dựng hoặc tạo lại code typecript.")]),n._v(" "),t("h2",{attrs:{id:"lam-cach-nao-đe-thay-đoi-kich-thuoc-lo-batch-size-khi-tim-nap-blockchain"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lam-cach-nao-đe-thay-đoi-kich-thuoc-lo-batch-size-khi-tim-nap-blockchain"}},[n._v("#")]),n._v(" Làm cách nào để thay đổi kích thước lô (batch size) khi tìm nạp blockchain?")]),n._v(" "),t("h3",{attrs:{id:"video-huong-dan-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#video-huong-dan-2"}},[n._v("#")]),n._v(" Video hướng dẫn")]),n._v(" "),t("figure",{staticClass:"video_container"},[t("iframe",{attrs:{src:"https://www.youtube.com/embed/LO_Gea_IN_s",frameborder:"0",allowfullscreen:"true"}})]),n._v(" "),t("h3",{attrs:{id:"gioi-thieu-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gioi-thieu-2"}},[n._v("#")]),n._v(" Giới thiệu")]),n._v(" "),t("p",[n._v("Kích thước mặc định là 100, nhưng bạn có thể thay đổi bằng cách sử dụng lệnh bổ sung "),t("code",[n._v("--batch-size=xx")]),n._v(".")]),n._v(" "),t("p",[n._v("Bạn cần thêm đoạn trên vào dòng lệnh để tạo thành một flag bổ sung, còn nếu bạn đang sử dụng Docker, hãy sửa đổi tệp docker-compos.yml như sau:")]),n._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[n._v("subquery-node:\n    image: onfinality/subql-node:latest\n    depends_on:\n      - "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('"postgres"')]),n._v("\n    restart: always\n    environment:\n      DB_USER: postgres\n      DB_PASS: postgres\n      DB_DATABASE: postgres\n      DB_HOST: postgres\n      DB_PORT: "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("5432")]),n._v("\n    volumes:\n      - ./:/app\n    command:\n      - -f"),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("/app\n      - --local\n      - --batch-size"),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("50")]),n._v("\n\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br"),t("span",{staticClass:"line-number"},[n._v("17")]),t("br"),t("span",{staticClass:"line-number"},[n._v("18")]),t("br")])]),t("p",[n._v("Trong ví dụ này, batch size đã được đổi thành 50.")]),n._v(" "),t("h3",{attrs:{id:"tai-sao-lai-can-thay-đoi-batch-size"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tai-sao-lai-can-thay-đoi-batch-size"}},[n._v("#")]),n._v(" Tại sao lại cần thay đổi batch size?")]),n._v(" "),t("p",[n._v("Việc sử dụng batch size nhỏ hơn có thể làm giảm mức sử dụng bộ nhớ và không khiến người dùng bị treo khi muốn thực hiện các truy vấn lớn. Nói cách khác, ứng dụng của bạn sẽ có tốc độ phản hồi nhanh hơn. Tuy nhiên, làm vậy sẽ khiến có thêm nhiều lệnh gọi API được thực hiện, vậy nên nếu bạn bị tính phí trên cơ sở đầu vào/đầu ra hoặc blockchain của bạn có giới hạn API ở đâu đó thì điều này có thể gây bất lợi cho bạn.")])])}),[],!1,null,null,null);a.default=i.exports}}]);