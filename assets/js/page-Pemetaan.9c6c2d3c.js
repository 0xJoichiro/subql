(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{563:function(a,t,s){"use strict";s.r(t);var n=s(1),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"pemetaan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pemetaan"}},[a._v("#")]),a._v(" Pemetaan")]),a._v(" "),s("p",[a._v("Fungsi pemetaan menentukan bagaimana data chain diubah menjadi entitas GraphQL yang dioptimalkan yang sebelumnya telah kita tentukan di file "),s("code",[a._v("schema.graphql")]),a._v(".")]),a._v(" "),s("ul",[s("li",[a._v("Pemetaan ditentukan di direktori "),s("code",[a._v("src/mappings")]),a._v(" dan diekspor sebagai sebuah fungsi")]),a._v(" "),s("li",[a._v("Pemetaan ini juga diekspor di "),s("code",[a._v("src/index.ts")])]),a._v(" "),s("li",[a._v("File pemetaan adalah referensi di "),s("code",[a._v("project.yaml")]),a._v(" di bawah penanganan pemetaan.")])]),a._v(" "),s("p",[a._v("Ada tiga kelas fungsi pemetaan; "),s("a",{attrs:{href:"#block-handler"}},[a._v("Penangan blokir")]),a._v(", "),s("a",{attrs:{href:"#event-handler"}},[a._v("Penangan Peristiwa")]),a._v(", dan "),s("a",{attrs:{href:"#call-handler"}},[a._v("Penangan Panggilan")]),a._v(".")]),a._v(" "),s("h2",{attrs:{id:"penanganan-balok"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#penanganan-balok"}},[a._v("#")]),a._v(" Penanganan Balok")]),a._v(" "),s("p",[a._v("Anda dapat menggunakan penangan blok untuk menangkap informasi setiap kali blok baru dilampirkan ke rantai Substrat, mis. nomor blok. Untuk mencapai ini, BlockHandler yang ditentukan akan dipanggil sekali untuk setiap blok.")]),a._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("SubstrateBlock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"@subql/types"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("async")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("handleBlock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("block"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" SubstrateBlock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[a._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Buat baru dengan StarterEntity with the block hash as it's ID")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" record "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("starterEntity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("hash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    record"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("field1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[a._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("toNumber")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),a._v(" record"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("save")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[s("a",{attrs:{href:"https://github.com/OnFinality-io/subql/blob/a5ab06526dcffe5912206973583669c7f5b9fdc9/packages/types/src/interfaces.ts#L16",target:"_blank",rel:"noopener noreferrer"}},[a._v("SubstrateBlock"),s("OutboundLink")],1),a._v(" adalah jenis interface yang diperluas dari "),s("a",{attrs:{href:"https://polkadot.js.org/docs/api/cookbook/blocks/",target:"_blank",rel:"noopener noreferrer"}},[a._v("signedBlock"),s("OutboundLink")],1),a._v(", tetapi juga menyertakan "),s("code",[a._v("specVersion")]),a._v(" dan "),s("code",[a._v("timestamp")]),a._v(".")]),a._v(" "),s("h2",{attrs:{id:"penanganan-acara"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#penanganan-acara"}},[a._v("#")]),a._v(" Penanganan Acara")]),a._v(" "),s("p",[a._v("Anda dapat menggunakan event handler untuk menangkap informasi saat event tertentu disertakan pada blok baru. Peristiwa yang merupakan bagian dari runtime Substrat default dan blok dapat berisi beberapa peristiwa.")]),a._v(" "),s("p",[a._v("Selama pemrosesan, event handler akan menerima event substrat sebagai argumen dengan input dan output yang diketik dari event. Semua jenis peristiwa akan memicu pemetaan, memungkinkan aktivitas dengan sumber data ditangkap. Anda harus menggunakan "),s("RouterLink",{attrs:{to:"/id/create/manifest.html#mapping-filters"}},[a._v("Filter Pemetaan")]),a._v(" dalam manifes Anda untuk memfilter peristiwa guna mengurangi waktu yang diperlukan untuk mengindeks data dan meningkatkan kinerja pemetaan.")],1),a._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("SubstrateEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"@subql/types"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("async")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("handleEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" SubstrateEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[a._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("account"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" balance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Ambil catatan berdasarkan IDnya")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" record "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("starterEntity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("extrinsic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("hash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    record"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("field2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" account"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    record"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("field3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("balance "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" Balance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("toBigInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),a._v(" record"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("save")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("p",[s("a",{attrs:{href:"https://github.com/OnFinality-io/subql/blob/a5ab06526dcffe5912206973583669c7f5b9fdc9/packages/types/src/interfaces.ts#L30",target:"_blank",rel:"noopener noreferrer"}},[a._v("SubstrateEvent"),s("OutboundLink")],1),a._v(" adalah jenis interface yang diperluas dari "),s("a",{attrs:{href:"https://github.com/polkadot-js/api/blob/f0ce53f5a5e1e5a77cc01bf7f9ddb7fcf8546d11/packages/types/src/interfaces/system/types.ts#L149",target:"_blank",rel:"noopener noreferrer"}},[a._v("EventRecord"),s("OutboundLink")],1),a._v(". Selain data acara, ini juga menyertakan "),s("code",[a._v("id")]),a._v(" (blok tempat kejadian ini berada) dan ekstrinsik di dalam blok ini.")]),a._v(" "),s("h2",{attrs:{id:"penanganan-telepon"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#penanganan-telepon"}},[a._v("#")]),a._v(" Penanganan Telepon")]),a._v(" "),s("p",[a._v("Penangan panggilan digunakan bila Anda ingin menangkap informasi tentang ekstrinsik media tertentu.")]),a._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("async")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("handleCall")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("extrinsic"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" SubstrateExtrinsic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[a._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" record "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("starterEntity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("extrinsic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("hash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    record"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("field4 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" extrinsic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("timestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),a._v(" record"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("save")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[s("a",{attrs:{href:"https://github.com/OnFinality-io/subql/blob/a5ab06526dcffe5912206973583669c7f5b9fdc9/packages/types/src/interfaces.ts#L21",target:"_blank",rel:"noopener noreferrer"}},[a._v("SubstrateExtrinsic"),s("OutboundLink")],1),a._v(" memperluas "),s("a",{attrs:{href:"https://github.com/polkadot-js/api/blob/a9c9fb5769dec7ada8612d6068cf69de04aa15ed/packages/types/src/extrinsic/Extrinsic.ts#L170",target:"_blank",rel:"noopener noreferrer"}},[a._v("GenericExtrinsic"),s("OutboundLink")],1),a._v(". Ini diberi "),s("code",[a._v("id")]),a._v(" (blok tempat ekstrinsik ini berada) dan menyediakan properti ekstrinsik yang memperluas kejadian di antara blok ini. Selain itu, ia mencatat status keberhasilan ekstrinsik ini.")]),a._v(" "),s("h2",{attrs:{id:"keadaan-kueri"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keadaan-kueri"}},[a._v("#")]),a._v(" Keadaan Kueri")]),a._v(" "),s("p",[a._v("Our goal is to cover all data sources for users for mapping handlers (more than just the three interface event types above). Oleh karena itu, kami telah mengekspos beberapa antarmuka @polkadot/api untuk meningkatkan kemampuan.")]),a._v(" "),s("p",[a._v("Ini adalah antarmuka yang saat ini kami dukung:")]),a._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://polkadot.js.org/docs/api/start/api.query",target:"_blank",rel:"noopener noreferrer"}},[a._v("api.query.<module>.<method>()"),s("OutboundLink")],1),a._v(" akan mengkueri balok "),s("strong",[a._v("current")]),a._v(".")]),a._v(" "),s("li",[s("a",{attrs:{href:"https://polkadot.js.org/docs/api/start/api.query.multi/#multi-queries-same-type",target:"_blank",rel:"noopener noreferrer"}},[a._v("api.query.<module>.<method>.multi()"),s("OutboundLink")],1),a._v(" akan membuat beberapa jenis kueri yang "),s("strong",[a._v("sama")]),a._v(" di balok saat ini.")]),a._v(" "),s("li",[s("a",{attrs:{href:"https://polkadot.js.org/docs/api/start/api.query.multi/#multi-queries-distinct-types",target:"_blank",rel:"noopener noreferrer"}},[a._v("api.queryMulti()"),s("OutboundLink")],1),a._v(" akan membuat beberapa jenis kueri "),s("strong",[a._v("berbeda")]),a._v(" di balok saat ini.")])]),a._v(" "),s("p",[a._v("Ini adalah antarmuka yang kami "),s("strong",[a._v("TIDAK")]),a._v(" dukung saat ini:")]),a._v(" "),s("ul",[s("li",[s("s",[a._v("api.tx.*")])]),a._v(" "),s("li",[s("s",[a._v("api.derive.*")])]),a._v(" "),s("li",[s("s",[a._v("api.query.<module>.<method>.at")])]),a._v(" "),s("li",[s("s",[a._v("api.query.<module>.<method>.entriesAt")])]),a._v(" "),s("li",[s("s",[a._v("api.query.<module>.<method>.entriesPaged")])]),a._v(" "),s("li",[s("s",[a._v("api.query.<module>.<method>.hash")])]),a._v(" "),s("li",[s("s",[a._v("api.query.<module>.<method>.keysAt")])]),a._v(" "),s("li",[s("s",[a._v("api.query.<module>.<method>.keysPaged")])]),a._v(" "),s("li",[s("s",[a._v("api.query.<module>.<method>.range")])]),a._v(" "),s("li",[s("s",[a._v("api.query.<module>.<method>.sizeAt")])])]),a._v(" "),s("p",[a._v("Lihat contoh penggunaan API ini dalam contoh kasus penggunaan "),s("a",{attrs:{href:"https://github.com/subquery/tutorials-validator-threshold",target:"_blank",rel:"noopener noreferrer"}},[a._v("validator-threshold"),s("OutboundLink")],1),a._v(" kami.")]),a._v(" "),s("h2",{attrs:{id:"panggilan-rpc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#panggilan-rpc"}},[a._v("#")]),a._v(" Panggilan RPC")]),a._v(" "),s("p",[a._v("Kami juga mendukung beberapa metode API RPC yang merupakan panggilan jarak jauh yang memungkinkan fungsi pemetaan berinteraksi dengan node, kueri, dan pengiriman aktual. Premis inti SubQuery adalah sifatnya yang deterministik, dan oleh karena itu, untuk menjaga agar hasil tetap konsisten, kami hanya mengizinkan panggilan RPC historis.")]),a._v(" "),s("p",[a._v("Dokumen di "),s("a",{attrs:{href:"https://polkadot.js.org/docs/substrate/rpc/#rpc",target:"_blank",rel:"noopener noreferrer"}},[a._v("JSON-RPC"),s("OutboundLink")],1),a._v(" menyediakan beberapa metode yang menggunakan "),s("code",[a._v("BlockHash")]),a._v(" sebagai parameter input (mis. "),s("code",[a._v("di?: BlockHash")]),a._v("), yang sekarang diizinkan. Kami juga telah memodifikasi metode ini untuk mengambil hash blok pengindeksan saat ini secara default.")]),a._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Mari menganggap kita saat ini mengindeks balok dengan nomor hash ini")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" blockhash "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("0x844047c4cf1719ba6d54891e92c071a41e3dfe789d064871148e9d41ef086f6a")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[a._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Metode asli memiliki input opsional yang merupakan block hash")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" b1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),a._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("rpc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("chain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getBlock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("blockhash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Akan menggunakan balok saat ini secara default")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" b2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),a._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("rpc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("chain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getBlock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("ul",[s("li",[a._v("Untuk panggilan RPC "),s("a",{attrs:{href:"#custom-substrate-chains"}},[a._v("Chain Substrat Kustom")]),a._v(", lihat "),s("a",{attrs:{href:"#usage"}},[a._v("penggunaan")]),a._v(".")])]),a._v(" "),s("h2",{attrs:{id:"modul-dan-perpustakaan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#modul-dan-perpustakaan"}},[a._v("#")]),a._v(" Modul dan Perpustakaan")]),a._v(" "),s("p",[a._v("Untuk meningkatkan kemampuan pemrosesan data SubQuery, kami telah mengizinkan beberapa modul bawaan NodeJS untuk menjalankan fungsi pemetaan di "),s("a",{attrs:{href:"#the-sandbox"}},[a._v("sandbox")]),a._v(", dan mengizinkan pengguna untuk memanggil perpustakaan pihak ketiga.")]),a._v(" "),s("p",[a._v("Harap perhatikan bahwa ini adalah "),s("strong",[a._v("fitur eksperimental")]),a._v(" dan Anda mungkin mengalami bug atau masalah yang dapat berdampak negatif pada fungsi pemetaan Anda. Laporkan setiap bug yang Anda temukan dengan membuat masalah di "),s("a",{attrs:{href:"https://github.com/subquery/subql",target:"_blank",rel:"noopener noreferrer"}},[a._v("GitHub"),s("OutboundLink")],1),a._v(".")]),a._v(" "),s("h3",{attrs:{id:"modul-bawaan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#modul-bawaan"}},[a._v("#")]),a._v(" Modul bawaan")]),a._v(" "),s("p",[a._v("Saat ini, kami mengizinkan modul NodeJS berikut: "),s("code",[a._v("assert")]),a._v(", "),s("code",[a._v("buffer")]),a._v(", "),s("code",[a._v("crypto")]),a._v(", "),s("code",[a._v("util")]),a._v(", dan "),s("code",[a._v("path")]),a._v(".")]),a._v(" "),s("p",[a._v("Daripada mengimpor seluruh modul, kami sarankan hanya mengimpor metode yang diperlukan yang Anda butuhkan. Beberapa metode dalam modul ini mungkin memiliki dependensi yang tidak didukung dan akan gagal saat diimpor.")]),a._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("hashMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ethers/lib/utils"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Good way")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("utils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ethers"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Bad way")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("async")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("handleCall")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("extrinsic"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" SubstrateExtrinsic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[a._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" record "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("starterEntity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("extrinsic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("hash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    record"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("field1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("hashMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Hello'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),a._v(" record"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("save")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("h3",{attrs:{id:"perpustakaan-pihak-ketiga"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#perpustakaan-pihak-ketiga"}},[a._v("#")]),a._v(" Perpustakaan pihak ketiga")]),a._v(" "),s("p",[a._v("Karena keterbatasan mesin virtual di kotak pasir kami, saat ini, kami hanya mendukung pustaka pihak ketiga yang ditulis oleh "),s("strong",[a._v("CommonJS")]),a._v(".")]),a._v(" "),s("p",[a._v("Kami juga mendukung pustaka "),s("strong",[a._v("hibrida")]),a._v(" seperti "),s("code",[a._v("@polkadot/*")]),a._v(" yang menggunakan ESM sebagai default. Namun, jika ada pustaka lain yang bergantung pada modul apa pun dalam format "),s("strong",[a._v("ESM")]),a._v(", mesin virtual akan "),s("strong",[a._v("TIDAK")]),a._v(" mengompilasi dan mengembalikan kesalahan.")]),a._v(" "),s("h2",{attrs:{id:"chain-substrat-kustom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#chain-substrat-kustom"}},[a._v("#")]),a._v(" Chain Substrat Kustom")]),a._v(" "),s("p",[a._v("SubQuery dapat digunakan pada rantai berbasis Substrat, tidak hanya Polkadot atau Kusama.")]),a._v(" "),s("p",[a._v("Anda dapat menggunakan rantai berbasis Substrat khusus dan kami menyediakan alat untuk mengimpor jenis, antarmuka, dan metode tambahan secara otomatis menggunakan "),s("a",{attrs:{href:"https://polkadot.js.org/docs/api/examples/promise/typegen/",target:"_blank",rel:"noopener noreferrer"}},[a._v("@polkadot/typegen"),s("OutboundLink")],1),a._v(".")]),a._v(" "),s("p",[a._v("Di bagian berikut, kami menggunakan "),s("a",{attrs:{href:"https://github.com/subquery/tutorials-kitty-chain",target:"_blank",rel:"noopener noreferrer"}},[a._v("contoh kitty"),s("OutboundLink")],1),a._v(" kami untuk menjelaskan proses integrasi.")]),a._v(" "),s("h3",{attrs:{id:"persiapan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#persiapan"}},[a._v("#")]),a._v(" Persiapan")]),a._v(" "),s("p",[a._v("Buat direktori baru "),s("code",[a._v("api-interfaces")]),a._v(" di bawah folder proyek "),s("code",[a._v("src")]),a._v(" untuk menyimpan semua file yang diperlukan dan dibuat. Kami juga membuat direktori "),s("code",[a._v("api-interfaces/kitties")]),a._v(" karena kami ingin menambahkan dekorasi di API dari modul "),s("code",[a._v("kitties")]),a._v(".")]),a._v(" "),s("h4",{attrs:{id:"metadata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#metadata"}},[a._v("#")]),a._v(" Metadata")]),a._v(" "),s("p",[a._v("Kami membutuhkan metadata untuk menghasilkan titik akhir API yang sebenarnya. Dalam contoh kitty, kami menggunakan endpoint dari testnet lokal, dan menyediakan tipe tambahan. Ikuti langkah-langkah di "),s("a",{attrs:{href:"https://polkadot.js.org/docs/api/examples/promise/typegen#metadata-setup",target:"_blank",rel:"noopener noreferrer"}},[a._v("penyiapan metadata PolkadotJS"),s("OutboundLink")],1),a._v(" untuk mengambil metadata node dari titik akhir "),s("strong",[a._v("HTTP")]),a._v("-nya.")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -H "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Content-Type: application/json"')]),a._v(" -d "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"id":"1", "jsonrpc":"2.0", "method": "state_getMetadata", "params":[]}\'')]),a._v(" http://localhost:9933\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("atau dari titik akhir "),s("strong",[a._v("websocket")]),a._v(" dengan bantuan dari "),s("a",{attrs:{href:"https://github.com/vi/websocat",target:"_blank",rel:"noopener noreferrer"}},[s("code",[a._v("websocat")]),s("OutboundLink")],1),a._v(":")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("//Instal websocat\nbrew "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" websocat\n\n//Dapatkan metadata\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" state_getMetadata "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" websocat "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'ws://127.0.0.1:9944'")]),a._v(" --jsonrpc\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("Selanjutnya, salin dan tempel hasilnya ke file JSON. Dalam "),s("a",{attrs:{href:"https://github.com/subquery/tutorials-kitty-chain",target:"_blank",rel:"noopener noreferrer"}},[a._v("contoh kitty"),s("OutboundLink")],1),a._v(" kami, kami telah membuat "),s("code",[a._v("api-interface/kitty.json")]),a._v(".")]),a._v(" "),s("h4",{attrs:{id:"definisi-jenis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#definisi-jenis"}},[a._v("#")]),a._v(" Definisi jenis")]),a._v(" "),s("p",[a._v("Kami berasumsi bahwa pengguna mengetahui jenis spesifik dan dukungan RPC dari rantai, dan itu didefinisikan dalam "),s("RouterLink",{attrs:{to:"/id/create/manifest.html"}},[a._v("Manifest")]),a._v(".")],1),a._v(" "),s("p",[a._v("Mengikuti "),s("a",{attrs:{href:"https://polkadot.js.org/docs/api/examples/promise/typegen#metadata-setup",target:"_blank",rel:"noopener noreferrer"}},[a._v("pengaturan jenis"),s("OutboundLink")],1),a._v(", kami membuat :")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("src/api-interfaces/definitions.ts")]),a._v(" - ini mengekspor semua definisi sub-folder")])]),a._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" kitties "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./kitties/definitions'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[s("code",[a._v("src/api-interfaces/kitties/definitions.ts")]),a._v(" - definisi jenis dari modul anak kucing")])]),a._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// custom types")]),a._v("\n    types"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        Address"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"AccountId"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        LookupSource"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"AccountId"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        KittyIndex"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"u32"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        Kitty"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"[u8; 16]"')]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// custom rpc : api.rpc.kitties.getKittyPrice")]),a._v("\n    rpc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        getKittyPrice"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            description"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Get Kitty price'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            params"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'at'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BlockHash'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    isHistoric"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    isOptional"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'kittyIndex'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'KittyIndex'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    isOptional"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Balance'")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br")])]),s("h4",{attrs:{id:"paket"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#paket"}},[a._v("#")]),a._v(" Paket")]),a._v(" "),s("ul",[s("li",[a._v("Di file "),s("code",[a._v("package.json")]),a._v(", pastikan untuk menambahkan "),s("code",[a._v("@polkadot/typegen")]),a._v(" sebagai ketergantungan pembangunan dan "),s("code",[a._v("@polkadot/api")]),a._v(" sebagai ketergantungan biasa (idealnya versi yang sama). Kita juga memerlukan "),s("code",[a._v("ts-node")]),a._v(" sebagai ketergantungan pembangunan untuk membantu kita menjalankan script.")]),a._v(" "),s("li",[a._v("Kita menambahkan script untuk menjalankan kedua jenis; "),s("code",[a._v("generate:defs")]),a._v(" dan penghasil "),s("code",[a._v("generate:meta")]),a._v(" metadata (dalam urutan itu, sehingga metadata bisa menggunakan jenisnya).")])]),a._v(" "),s("p",[a._v("Berikut adalah versi sederhana dari "),s("code",[a._v("package.json")]),a._v(". Pastikan di bagian "),s("strong",[a._v("scripts")]),a._v(" nama paket sudah benar dan direktorinya valid.")]),a._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kitty-birthinfo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"generate:defs"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ts-node --skip-project node_modules/.bin/polkadot-types-from-defs --package kitty-birthinfo/api-interfaces --input ./src/api-interfaces"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"generate:meta"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ts-node --skip-project node_modules/.bin/polkadot-types-from-chain --package kitty-birthinfo/api-interfaces --endpoint ./src/api-interfaces/kitty.json --output ./src/api-interfaces --strict"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"dependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"@polkadot/api"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"^4.9.2"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"devDependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"typescript"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"^4.1.3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"@polkadot/typegen"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"^4.9.2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"ts-node"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"^8.6.2"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br")])]),s("h3",{attrs:{id:"penghasil-jenis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#penghasil-jenis"}},[a._v("#")]),a._v(" Penghasil jenis")]),a._v(" "),s("p",[a._v("Sekarang setelah persiapan selesai, kami siap untuk menghasilkan jenis dan metadata. Jalankan perintah di bawah ini:")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Yarn untuk menginstal ketergantungan baru")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Menghasilkan jenis")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" generate:defs\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("Di setiap folder modul (misalnya "),s("code",[a._v("/kitties")]),a._v("), sekarang seharusnya ada "),s("code",[a._v("types.ts")]),a._v(" yang dihasilkan yang mendefinisikan semua antarmuka dari definisi modul ini, juga file "),s("code",[a._v("indeks.ts")]),a._v(" yang mengekspor semuanya.")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Menghasilkan metadata")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" generate:meta\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("Perintah ini akan menghasilkan metadata dan penambahan api baru untuk API. Karena kami tidak ingin menggunakan API bawaan, kami perlu menggantinya dengan menambahkan penggantian eksplisit di "),s("code",[a._v("tsconfig.json")]),a._v(" kami. Setelah pembaruan, jalur di konfigurasi akan terlihat seperti ini (tanpa komentar):")]),a._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"compilerOptions"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ini adalah nama paket yang kita gunakan (in the interface imports, --package for generators) */")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"kitty-birthinfo/*"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"src/*"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// di sini kita mengganti augmentasi @polkadot/api dengan milik kita sendiri, dihasilkan dari chain")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"@polkadot/api/augment"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"src/interfaces/augment-api.ts"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// mengganti jenis tambahan dengan milik kita sendiri, seperti yang dihasilkan dari definisi")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"@polkadot/types/augment"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"src/interfaces/augment-types.ts"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("h3",{attrs:{id:"penggunaan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#penggunaan"}},[a._v("#")]),a._v(" Penggunaan")]),a._v(" "),s("p",[a._v("Sekarang dalam fungsi pemetaan, kita dapat menunjukkan bagaimana metadata dan tipe benar-benar menghiasi API. Titik akhir RPC akan mendukung modul dan metode yang kami nyatakan di atas. Dan untuk menggunakan panggilan rpc khusus, silakan lihat bagian "),s("a",{attrs:{href:"#custom-chain-rpc-calls"}},[a._v("Panggilan rpc berantai khusus")])]),a._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("async")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kittyApiHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[a._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//mengembalikan jenis KittyIndex")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" nextKittyId "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),a._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("kitties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nextKittyId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//  mengembalikan jenis Kitty, jenis parameter input adalah AccountID dan KittyIndex")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" allKitties  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),a._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("kitties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kitties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'xxxxxxxxx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("123")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("Next kitty id ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[a._v("${")]),a._v("nextKittyId"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[a._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[a._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Custom rpc, set undefined to blockhash")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" kittyPrice "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),a._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("rpc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("kitties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getKittyPrice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("undefined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("nextKittyId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("p",[s("strong",[a._v("Jika Anda ingin memublikasikan proyek ini ke penjelajah kami, harap sertakan file yang dihasilkan di "),s("code",[a._v("src/api-interfaces")]),a._v(".")])]),a._v(" "),s("h3",{attrs:{id:"panggilan-rpc-chain-kustom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#panggilan-rpc-chain-kustom"}},[a._v("#")]),a._v(" Panggilan rpc chain kustom")]),a._v(" "),s("p",[a._v("Untuk mendukung panggilan RPC berantai yang disesuaikan, kita harus memasukkan definisi RPC secara manual untuk "),s("code",[a._v("typesBundle")]),a._v(", yang memungkinkan konfigurasi per spesifikasi. Anda dapat menentukan "),s("code",[a._v("typesBundle")]),a._v(" di "),s("code",[a._v("project.yml")]),a._v(". Dan harap diingat hanya jenis panggilan "),s("code",[a._v("isHistoric")]),a._v(" yang didukung.")]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("...")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("types")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v('"KittyIndex"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"u32"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v('"Kitty"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"[u8; 16]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("typesBundle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("chainname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("rpc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kitties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            getKittyPrice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("params")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n                  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'at'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BlockHash'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("isHistoric")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("isOptional")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("false")]),a._v("\n                  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'kittyIndex'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'KittyIndex'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("isOptional")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("false")]),a._v("\n                  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Balance"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);