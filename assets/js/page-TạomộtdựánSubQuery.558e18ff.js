(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{829:function(t,n,a){"use strict";a.r(n);var s=a(1),c=Object(s.a)({},(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"tao-mot-du-an-subquery"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tao-mot-du-an-subquery"}},[t._v("#")]),t._v(" Tạo một dự án SubQuery")]),t._v(" "),a("p",[t._v("Trong hướng dẫn "),a("RouterLink",{attrs:{to:"/quickstart/quickstart.html"}},[t._v("bắt đầu nhan")]),t._v(", chúng tôi đã xem nhanh một ví dụ để bạn hiểu SubQuery là gì và nó hoạt động như thế nào. Ở đây chúng ta sẽ xem xét kỹ hơn quy trình làm việc khi tạo dự án của bạn và các tệp chính mà bạn sẽ làm việc.")],1),t._v(" "),a("h2",{attrs:{id:"quy-trinh-lam-viec-co-ban"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#quy-trinh-lam-viec-co-ban"}},[t._v("#")]),t._v(" Quy trình làm việc cơ bản")]),t._v(" "),a("p",[t._v("Một số ví dụ sau sẽ giả sử bạn đã khởi tạo thành công gói khởi động trong phần "),a("RouterLink",{attrs:{to:"/vi/quickstart/quickstart.html"}},[t._v("Bắt đầu nhanh")]),t._v(". Từ gói khởi động đó, chúng tôi sẽ hướng dẫn quy trình chuẩn để tùy chỉnh và triển khai dự án SubQuery của bạn.")],1),t._v(" "),a("ol",[a("li",[t._v("Khởi tạo dự án của bạn bằng "),a("code",[t._v("subql init PROJECT_NAME")])]),t._v(" "),a("li",[t._v("Cập nhật tệp kê khai ("),a("code",[t._v("project.yaml")]),t._v(") để bao gồm thông tin về chuỗi khối của bạn và các thực thể mà bạn sẽ ánh xạ - xem "),a("RouterLink",{attrs:{to:"/vi/create/manifest.html"}},[t._v("Manifest File")])],1),t._v(" "),a("li",[t._v("Tạo các thực thể GraphQL trong lược đồ của bạn ("),a("code",[t._v("schema.graphql")]),t._v(") xác định hình dạng của dữ liệu mà bạn sẽ trích xuất và duy trì để truy vấn - xem "),a("RouterLink",{attrs:{to:"/vi/create/graphql.html"}},[t._v("Lược đồ GraphQL")])],1),t._v(" "),a("li",[t._v("Thêm tất cả các hàm ánh xạ (ví dụ: "),a("code",[t._v("mappingHandlers.ts")]),t._v(") mà bạn muốn gọi để chuyển đổi dữ liệu chuỗi thành các thực thể GraphQL mà bạn đã xác định - xem "),a("RouterLink",{attrs:{to:"/vi/create/mapping.html"}},[t._v("Ánh xạ")])],1),t._v(" "),a("li",[t._v("Tạo, xây dựng và xuất code của bạn lên Dự án SubQuery (hoặc chạy trong node cục bộ của riêng bạn) - xem "),a("RouterLink",{attrs:{to:"/vi/create/quickstart.html#running-and-querying-your-starter-project"}},[t._v("Chạy và truy vấn Dự án dành cho người mới bắt đầu của bạn")]),t._v(" trong hướng dẫn bắt đầu nhanh của chúng tôi.")],1)]),t._v(" "),a("h2",{attrs:{id:"cau-truc-thu-muc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cau-truc-thu-muc"}},[t._v("#")]),t._v(" Cấu trúc thư mục")]),t._v(" "),a("p",[t._v("Bản đồ sau cung cấp tổng quan về cấu trúc thư mục của một dự án SubQuery khi lệnh "),a("code",[t._v("init")]),t._v(" được chạy.")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("- project-name\n  L package.json\n  L project.yaml\n  L README.md\n  L schema.graphql\n  L tsconfig.json\n  L docker-compose.yml\n  L src\n    L index.ts\n    L mappings\n      L mappingHandlers.ts\n  L .gitignore\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("Ví dụ:")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/subQuery_directory_stucture.png",alt:"Cấu trúc thư mục SubQuery"}})]),t._v(" "),a("h2",{attrs:{id:"tao-ma"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tao-ma"}},[t._v("#")]),t._v(" Tạo mã")]),t._v(" "),a("p",[t._v("Bất cứ khi nào bạn thay đổi các thực thể GraphQL của mình, bạn phải tạo lại thư mục loại của mình bằng lệnh sau.")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yarn codegen\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("Thao tác này sẽ tạo một thư mục mới (hoặc cập nhật thư mục "),a("code",[t._v("src/styles")]),t._v(" hiện có chứa các lớp thực thể được tạo cho mỗi loại mà bạn đã xác định trước đó trong "),a("code",[t._v("schema.graphql")]),t._v(". Các lớp này cung cấp quyền truy cập tải, đọc và ghi thực thể an toàn về kiểu đối với các trường thực thể - xem thêm về quy trình này trong "),a("RouterLink",{attrs:{to:"/vi/create/graphql.html"}},[t._v("Lược đồ GraphQL")]),t._v(".")],1),t._v(" "),a("h2",{attrs:{id:"xay-dung"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xay-dung"}},[t._v("#")]),t._v(" Xây dựng")]),t._v(" "),a("p",[t._v("Để chạy Dự án SubQuery của bạn trên một Node SubQuery được lưu trữ cục bộ, trước tiên bạn cần xây dựng công việc của mình.")]),t._v(" "),a("p",[t._v("Chạy lệnh xây dựng từ thư mục gốc của dự án.")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Yarn")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" build\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# NPM")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run-script build\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h2",{attrs:{id:"ghi-nhat-ky"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ghi-nhat-ky"}},[t._v("#")]),t._v(" Ghi nhật ký")]),t._v(" "),a("p",[t._v("Phương thức "),a("code",[t._v("console.log")]),t._v(" "),a("strong",[t._v("không còn được hỗ trợ")]),t._v(". Thay vào đó, mô-đun "),a("code",[t._v("logger")]),t._v(" đã được đưa vào các loại, có nghĩa là chúng tôi có thể hỗ trợ trình ghi nhật ký có thể chấp nhận các cấp độ ghi nhật ký khác nhau.")]),t._v(" "),a("div",{staticClass:"language-typescript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[t._v("logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Info level message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Debugger level message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Warning level message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("Để sử dụng "),a("code",[t._v("logger.info")]),t._v(" hoặc "),a("code",[t._v("logger.warn")]),t._v(", chỉ cần đặt dòng vào tệp ánh xạ của bạn.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/logging_info.png",alt:"logging.info"}})]),t._v(" "),a("p",[t._v("Để sử dụng "),a("code",[t._v("logger.debug")]),t._v(", cần thực hiện thêm một bước. Thêm "),a("code",[t._v("--log-level = debug")]),t._v(" vào dòng lệnh của bạn.")]),t._v(" "),a("p",[t._v("Nếu bạn đang chạy vùng chứa docker, hãy thêm dòng này vào tệp "),a("code",[t._v("docker-comp.yaml")]),t._v(" của bạn.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/logging_debug.png",alt:"logging.debug"}})]),t._v(" "),a("p",[t._v("Bây giờ bạn sẽ thấy đăng nhập mới trong màn hình đầu cuối.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/subquery_logging.png",alt:"logging.debug"}})])])}),[],!1,null,null,null);n.default=c.exports}}]);